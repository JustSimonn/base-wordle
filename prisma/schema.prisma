generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model scores {
  id            Int       @id @default(autoincrement())
  user_id       Int
  game_date     DateTime  @db.Date
  points_earned Int?      @default(0)
  word_guessed  String?   @db.VarChar(5)
  attempts      Int?
  gas_used      Decimal?  @db.Decimal(18, 8)
  developer_fee Decimal?  @db.Decimal(18, 8)
  created_at    DateTime? @default(now()) @db.Timestamp(6)
  users         users     @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([user_id, game_date])
  @@index([user_id, game_date], map: "idx_scores_user_date")
}

model streaks {
  id               Int       @id @default(autoincrement())
  user_id          Int
  current_streak   Int?      @default(0)
  longest_streak   Int?      @default(0)
  last_played_date DateTime? @db.Date
  updated_at       DateTime? @default(now()) @db.Timestamp(6)
  users            users     @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([user_id], map: "idx_streaks_user")
}

model users {
  id             Int       @id @default(autoincrement())
  wallet_address String    @unique @db.VarChar(255)
  username       String?   @db.VarChar(100)
  eth_balance    Decimal?  @default(0) @db.Decimal(18, 8)
  total_points   Int?      @default(0)
  created_at     DateTime? @default(now()) @db.Timestamp(6)
  updated_at     DateTime? @default(now()) @db.Timestamp(6)
  scores         scores[]
  streaks        streaks[]

  @@index([wallet_address], map: "idx_users_wallet")
}
